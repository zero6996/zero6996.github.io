<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta name="keywords" content="旅游网项目01, Zero的博客">
    <meta name="description" content="1. 前言为了巩固web基础知识，提升综合运用能力，故编写此项目，以做练习。
今日内容为登录注册内容。

2. 技术选型2.1 Web层
Servlet：前端控制器
html：视图
Filter：过滤器
BeanUtils：数据封装
Jac">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>旅游网项目01 | Zero的博客</title>
    <link rel="icon" type="image/jpeg" href="/wlop.jpg">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    

</head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">Zero的博客</span>
                    </a>
                </div>
                

<a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Zero的博客</div>
        <div class="logo-desc">
            
            欢迎来到我的博客！
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/zero6996" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Follow Me 秋梨膏~
            </a>
        </li>
        
    </ul>

    <div class="social-link">
    <a href="https://github.com/zero6996" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:1490829140@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1490829140" class="tooltipped" data-tooltip="QQ联系我: 1490829140" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/zero6996" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Follow Me 秋梨膏~" data-position="left" data-delay="50">
    <svg viewbox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/>
    </svg>
</a>
        
    </nav>
</header>





<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/20.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        旅游网项目01
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }
</style>
<div class="row">
    <div class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Project/" target="_blank">
                                <span class="chip bg-color">Project</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/JavaWeb/" class="post-category" target="_blank">
                                JavaWeb
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-07-21
                </div>

                
                    
                    <div class="info-break-policy">
                        <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                        3.7k
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                        19 分
                    </div>
                    
                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h2><p>为了巩固web基础知识，提升综合运用能力，故编写此项目，以做练习。</p>
<p>今日内容为登录注册内容。</p>
<a id="more"></a>
<h2 id="2-技术选型"><a href="#2-技术选型" class="headerlink" title="2. 技术选型"></a>2. 技术选型</h2><h3 id="2-1-Web层"><a href="#2-1-Web层" class="headerlink" title="2.1 Web层"></a>2.1 <code>Web</code>层</h3><ol>
<li><code>Servlet</code>：前端控制器</li>
<li><code>html</code>：视图</li>
<li><code>Filter</code>：过滤器</li>
<li><code>BeanUtils</code>：数据封装</li>
<li><code>Jackson</code>：json序列化工具</li>
</ol>
<h3 id="2-2-Service层"><a href="#2-2-Service层" class="headerlink" title="2.2 Service层"></a>2.2 <code>Service</code>层</h3><ol>
<li><code>Javamail</code>：java发送邮件工具</li>
<li><code>Redis</code>：nosql内存数据库</li>
<li><code>Jedis</code>：java的Redis客户端</li>
</ol>
<h3 id="2-3-Dao层"><a href="#2-3-Dao层" class="headerlink" title="2.3  Dao层"></a>2.3  <code>Dao</code>层</h3><ol>
<li><code>MySQL</code>：后台数据库</li>
<li><code>Druid</code>：数据库连接池</li>
<li><code>JdbcTemplate</code>：jdbc的工具</li>
</ol>
<h2 id="3-创建数据库"><a href="#3-创建数据库" class="headerlink" title="3. 创建数据库"></a>3. 创建数据库</h2>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-sql">
-- 创建数据库
create database travel;

-- 使用数据库
use travel;

-- 创建表
&#x2F;*==============================================================*&#x2F;
&#x2F;* DBMS name:      MySQL 5.0                                    *&#x2F;
&#x2F;* Created on:     2019&#x2F;7&#x2F;21 20:13:29                           *&#x2F;
&#x2F;*==============================================================*&#x2F;
set names utf8;

drop table if exists tab_favorite;
drop table if exists tab_route_img;
drop table if exists tab_route;
drop table if exists tab_category;
drop table if exists tab_seller;
drop table if exists tab_user;

&#x2F;*==============================================================*&#x2F;
&#x2F;* Table: tab_category                                          *&#x2F;
&#x2F;*==============================================================*&#x2F;
create table tab_category
(
   cid                  int not null auto_increment,
   cname                varchar(100) not null,
   primary key (cid),
   unique key AK_nq_categoryname (cname)
);

&#x2F;*==============================================================*&#x2F;
&#x2F;* Table: tab_favorite                                          *&#x2F;
&#x2F;*==============================================================*&#x2F;
create table tab_favorite
(
   rid                  int not null,
   date                 date not null,
   uid                  int not null,
   primary key (rid, uid)
);

&#x2F;*==============================================================*&#x2F;
&#x2F;* Table: tab_route                                             *&#x2F;
&#x2F;*==============================================================*&#x2F;
create table tab_route
(
   rid                  int not null auto_increment,
   rname                varchar(500) not null,
   price                double not null,
   routeIntroduce       varchar(1000),
   rflag                char(1) not null,
   rdate                varchar(19),
   isThemeTour          char(1) not null,
   count                int default 0,
   cid                  int not null,
   rimage               varchar(200),
   sid                  int,
   sourceId             varchar(50),
   primary key (rid),
   unique key AK_nq_sourceId (sourceId)
);

&#x2F;*==============================================================*&#x2F;
&#x2F;* Table: tab_route_img                                         *&#x2F;
&#x2F;*==============================================================*&#x2F;
create table tab_route_img
(
   rgid                 int not null auto_increment,
   rid                  int not null,
   bigPic               varchar(200) not null,
   smallPic             varchar(200),
   primary key (rgid)
);

&#x2F;*==============================================================*&#x2F;
&#x2F;* Table: tab_seller                                            *&#x2F;
&#x2F;*==============================================================*&#x2F;
create table tab_seller
(
   sid                  int not null auto_increment,
   sname                varchar(200) not null,
   consphone            varchar(20) not null,
   address              varchar(200),
   primary key (sid),
   unique key AK_Key_2 (sname)
);

&#x2F;*==============================================================*&#x2F;
&#x2F;* Table: tab_user                                              *&#x2F;
&#x2F;*==============================================================*&#x2F;
create table tab_user
(
   uid                  int not null auto_increment,
   username             varchar(100) not null,
   password             varchar(32) not null,
   name                 varchar(100),
   birthday             date,
   sex                  char(1),
   telephone            varchar(11),
   email                varchar(100),
   status               char(1) ,
   code					varchar(50),
   
   primary key (uid),
   unique key AK_nq_username (username),
   unique key AK_nq_code (code)
);

-- 建立表连接
alter table tab_favorite add constraint FK_route_favorite foreign key (rid)
      references tab_route (rid) on delete restrict on update restrict;

alter table tab_favorite add constraint FK_user_favorite foreign key (uid)
      references tab_user (uid) on delete restrict on update restrict;

alter table tab_route add constraint FK_category_route foreign key (cid)
      references tab_category (cid) on delete restrict on update restrict;

alter table tab_route add constraint FK_seller_route foreign key (sid)
      references tab_seller (sid) on delete restrict on update restrict;

alter table tab_route_img add constraint FK_route_routeimg foreign key (rid)
      references tab_route (rid) on delete restrict on update restrict;


-- 修改表默认字符集,解决1366问题
alter table tab_category convert to character set utf8 collate utf8_general_ci;
alter table tab_favorite convert to character set utf8 collate utf8_general_ci;
alter table tab_route convert to character set utf8 collate utf8_general_ci;
alter table tab_route_img convert to character set utf8 collate utf8_general_ci;
alter table tab_seller convert to character set utf8 collate utf8_general_ci;
alter table tab_user convert to character set utf8 collate utf8_general_ci;
</code></pre>
<p>关于报错1366问题：<a href="https://blog.csdn.net/weixin_40539892/article/details/80227981" target="_blank" rel="noopener">详见文章</a></p>
<h2 id="4-注册功能"><a href="#4-注册功能" class="headerlink" title="4. 注册功能"></a>4. 注册功能</h2><h3 id="4-1-功能分析"><a href="#4-1-功能分析" class="headerlink" title="4.1 功能分析"></a>4.1 功能分析</h3><p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/07/22/register-1563759463469.bmp" alt="title"></p>
<h3 id="4-2-代码实现"><a href="#4-2-代码实现" class="headerlink" title="4.2 代码实现"></a>4.2 代码实现</h3><h4 id="4-2-1-表单校验"><a href="#4-2-1-表单校验" class="headerlink" title="4.2.1 表单校验"></a>4.2.1 表单校验</h4>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-javascript">&#x2F;&#x2F; 使用Jquery完成表单校验
&#x2F;&#x2F; 定义校验方法
&#x2F;&#x2F; 用户名校验
function checkUsername() {
    &#x2F;&#x2F; 1. 获取用户名值
    var username = $(&quot;#username&quot;).val();
    &#x2F;&#x2F; 2. 定义正则
    var reg_username = &#x2F;^[\u4e00-\u9fa5]|[0-9a-zA-Z]{2,20}$&#x2F;;
    &#x2F;&#x2F; 3. 判断，给出提示信息
    var flag = reg_username.test(username);
    if (flag){
        &#x2F;&#x2F; 用户名合法
        $(&quot;#username&quot;).css(&quot;border&quot;,&quot;&quot;);
    }else {
        &#x2F;&#x2F; 用户名非法，加红色边框
        $(&quot;#username&quot;).css(&quot;border&quot;,&quot;1px solid red&quot;);
    }
    return flag;
}
&#x2F;&#x2F; 密码校验
function checkPwd() {
    &#x2F;&#x2F; 1. 获取值
    var password = $(&quot;#password&quot;).val();
    &#x2F;&#x2F; 2. 定义正则
    var reg_password = &#x2F;^[\w_-]{6,20}$&#x2F;;
    &#x2F;&#x2F; 3. 判断，返回信息
    var flag = reg_password.test(password);
    if (flag){
        &#x2F;&#x2F; 密码合法
        $(&quot;#password&quot;).css(&quot;border&quot;,&quot;&quot;);
    } else {
        &#x2F;&#x2F; 非法，加红色边框
        $(&quot;#password&quot;).css(&quot;border&quot;,&quot;1px solid red&quot;);
    }
    return flag;
}
&#x2F;&#x2F; 邮箱校验
function checkEmail() {
    var email = $(&quot;#email&quot;).val();
    var reg_email = &#x2F;^\w+@\w+\.\w+$&#x2F;;
    var flag = reg_email.test(email);
    if(flag){
        $(&quot;#email&quot;).css(&quot;border&quot;,&quot;&quot;);
    }else {
        $(&quot;#email&quot;).css(&quot;border&quot;,&quot;1px solid red&quot;);
    }
    return flag;
}

$(function () {
    &#x2F;&#x2F; 当表单提交时，调用所有校验方法
    $(&quot;#registerForm&quot;).submit(function () {
        return checkUsername() &amp;&amp; checkPwd() &amp;&amp; checkEmail();
    });

    &#x2F;&#x2F; 当某一组件失去焦点时，调用对应的校验方法
    $(&quot;#username&quot;).blur(checkUsername);
    $(&quot;#password&quot;).blur(checkPwd);
    $(&quot;#email&quot;).blur(checkEmail);
});
</code></pre>
<h4 id="4-2-2-异步提交表单"><a href="#4-2-2-异步提交表单" class="headerlink" title="4.2.2 异步提交表单"></a>4.2.2 异步提交表单</h4><p>使用异步提交表单是为了获取服务器响应的数据。因为前台使用的是html作为视图层，不能够直接从servlet相关的域对象获取值，只能通过ajax获取响应数据。</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-javascript">$(function () {
    &#x2F;&#x2F; 当表单提交时，调用所有校验方法
    $(&quot;#registerForm&quot;).submit(function () {
        &#x2F;&#x2F; 1. 发送数据到服务器
        if ( checkUsername() &amp;&amp; checkPwd() &amp;&amp; checkEmail()){
            &#x2F;&#x2F; 校验通过，发送ajax请求，提交表单数据
            $.post(&quot;registUserServlet&quot;,$(this).serialize(),function (data) {
                &#x2F;&#x2F; 处理服务器响应的数据 data  {flag:true,errorMsg:&quot;注册失败&quot;}

                if (data.flag){
                    &#x2F;&#x2F; 注册成功，跳转到成功页面
                    location.href = &quot;register_ok.html&quot;;
                }else{
                    &#x2F;&#x2F; 注册失败，给errorMsg添加提示信息
                    $(&quot;#errorMsg&quot;).html(data.errorMsg);
                }
            })
        }
        &#x2F;&#x2F; 2. 不让页面跳转，不提交
        return false;
    });

    &#x2F;&#x2F; 当某一组件失去焦点时，调用对应的校验方法
    $(&quot;#username&quot;).blur(checkUsername);
    $(&quot;#password&quot;).blur(checkPwd);
    $(&quot;#email&quot;).blur(checkEmail);
});
</code></pre>
<h3 id="4-3-后台代码实现"><a href="#4-3-后台代码实现" class="headerlink" title="4.3 后台代码实现"></a>4.3 后台代码实现</h3><h4 id="4-3-1-注册用户控制器：RegistUserServlet"><a href="#4-3-1-注册用户控制器：RegistUserServlet" class="headerlink" title="4.3.1 注册用户控制器：RegistUserServlet"></a>4.3.1 注册用户控制器：<code>RegistUserServlet</code></h4>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.web.servlet;

import cn.itcast.travel.domain.ResultInfo;
import cn.itcast.travel.domain.User;
import cn.itcast.travel.service.UserService;
import cn.itcast.travel.service.impl.UserServiceImpl;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.apache.commons.beanutils.BeanUtils;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.util.Map;

@WebServlet(&quot;&#x2F;registUserServlet&quot;)
public class RegistUserServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        &#x2F;&#x2F; 获取用户输入的验证码
        String check = request.getParameter(&quot;check&quot;);
        &#x2F;&#x2F; 从session中获取生成的验证码
        HttpSession session = request.getSession();
        String checkcode_server = (String)session.getAttribute(&quot;CHECKCODE_SERVER&quot;);
        session.removeAttribute(&quot;CHECKCODE_SERVER&quot;); &#x2F;&#x2F; 确保验证码只能使用一次
        &#x2F;&#x2F; 如果验证码错误，直接注册失败
        if (checkcode_server == null || !checkcode_server.equalsIgnoreCase(check)){
            &#x2F;&#x2F; 验证码错误
            ResultInfo info = new ResultInfo();
            &#x2F;&#x2F; 注册失败
            info.setFlag(false);
            info.setErrorMsg(&quot;验证码错误&quot;);
            &#x2F;&#x2F; 将info对象序列化为json
            ObjectMapper mapper = new ObjectMapper();
            String json = mapper.writeValueAsString(info);
            response.setContentType(&quot;application&#x2F;json;charset=utf-8&quot;);
            response.getWriter().write(json);
            return; &#x2F;&#x2F; todo:为何return?
        }

        &#x2F;&#x2F; 验证通过
        &#x2F;&#x2F; 1. 获取前台表单数据
        Map&lt;String, String[]&gt; map = request.getParameterMap();

        &#x2F;&#x2F; 2. 封装为user对象
        User user = new User();
        try {
            BeanUtils.populate(user,map);
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }

        &#x2F;&#x2F; 3. 调用service完成注册
        UserService service = new UserServiceImpl();
        boolean flag = service.regist(user);
        ResultInfo info = new ResultInfo();
        &#x2F;&#x2F; 4. 响应结果
        if (flag){
            &#x2F;&#x2F; 注册成功
            info.setFlag(true);
        }else{
            &#x2F;&#x2F; 注册失败
            info.setFlag(false);
            info.setErrorMsg(&quot;注册失败！&quot;);
        }

        &#x2F;&#x2F; 将info对象序列化为json
        ObjectMapper mapper = new ObjectMapper();
        System.out.println(info);
        String json = mapper.writeValueAsString(info);
        &#x2F;&#x2F; 将json数据回写客户端
        &#x2F;&#x2F; 设置content-type
        response.setContentType(&quot;application&#x2F;json;charset=utf-8&quot;);
        response.getWriter().write(json);

    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doPost(request, response);
    }
}
</code></pre>
<h4 id="4-3-2-用户服务业务层以及对应实现类"><a href="#4-3-2-用户服务业务层以及对应实现类" class="headerlink" title="4.3.2 用户服务业务层以及对应实现类"></a>4.3.2 用户服务业务层以及对应实现类</h4><p>服务层接口</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.service;

import cn.itcast.travel.domain.User;

public interface UserService {
    boolean regist(User user);
}
</code></pre>
<p>实现类</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.service.impl;

import cn.itcast.travel.dao.UserDao;
import cn.itcast.travel.dao.impl.UserDaoImpl;
import cn.itcast.travel.domain.User;
import cn.itcast.travel.service.UserService;

public class UserServiceImpl implements UserService {

    private UserDao userDao = new UserDaoImpl();

    &#x2F;**
     * 注册用户服务
     * @param user
     * @return 是否注册成功
     *&#x2F;
    @Override
    public boolean regist(User user) {
        &#x2F;&#x2F; 1. 根据用户名查询用户对象
        User u = userDao.findByUsername(user.getUsername());
        &#x2F;&#x2F; 判断是否为null
        if (u != null){
            &#x2F;&#x2F; 不为空，说明用户名存在，注册失败
            return false;
        }
        &#x2F;&#x2F; 2. 保存用户信息
        userDao.save(user);
        return true;
    }
}
</code></pre>
<h4 id="4-3-3-数据操作层及对应实现类"><a href="#4-3-3-数据操作层及对应实现类" class="headerlink" title="4.3.3 数据操作层及对应实现类"></a>4.3.3 数据操作层及对应实现类</h4><p>Dao</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.dao;

import cn.itcast.travel.domain.User;

public interface UserDao {
    User findByUsername(String username);
    void save(User user);
}
</code></pre>
<p>实现类</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.dao.impl;

import cn.itcast.travel.dao.UserDao;
import cn.itcast.travel.domain.User;
import cn.itcast.travel.util.JDBCUtils;
import org.springframework.jdbc.core.BeanPropertyRowMapper;
import org.springframework.jdbc.core.JdbcTemplate;

public class UserDaoImpl implements UserDao {

    private JdbcTemplate template = new JdbcTemplate(JDBCUtils.getDataSource());


    &#x2F;**
     * 查询用户是否存在
     * @param username
     * @return 返回查询到的用户
     *&#x2F;
    @Override
    public User findByUsername(String username) {
        &#x2F;*
            queryForObject()方法
            如果查询结果条数为0或者大于1)都会返回异常，我们希望没查到直接返回null
         *&#x2F;
        User user = null;
        try{
            user = template.queryForObject(&quot;select * from tab_user where username = ? &quot;,
                    new BeanPropertyRowMapper&lt;User&gt;(User.class),username);
        }catch (Exception e){
            System.out.println(&quot;用户未查询到&quot;);
        }
        return user;
    }

    @Override
    public void save(User user) {
        &#x2F;&#x2F; 1. 定义sql
        String sql = &quot;insert into tab_user(username,password,name,birthday,sex,telephone,email) values(?,?,?,?,?,?,?)&quot;;
        &#x2F;&#x2F; 2. 执行sql
        template.update(sql,user.getUsername(),user.getPassword(),user.getName(),
                            user.getBirthday(),user.getSex(),user.getTelephone(),user.getEmail());
    }
}
</code></pre>
<h4 id="4-3-4-邮件激活"><a href="#4-3-4-邮件激活" class="headerlink" title="4.3.4 邮件激活"></a>4.3.4 邮件激活</h4><p>为什么要进行邮件激活？为了保证用户填写的邮箱是正确的。将来可以推广一些宣传信息，到用户邮箱中。</p>
<h4 id="4-3-5-发送邮件"><a href="#4-3-5-发送邮件" class="headerlink" title="4.3.5 发送邮件"></a>4.3.5 发送邮件</h4><ol>
<li>打开邮箱</li>
<li>开启授权码，并生成一个</li>
<li>在<code>MailUtils</code>中设置自己的邮箱账号和密码(授权码)</li>
</ol>
<blockquote>
<p><code>MailUtils</code>是邮箱工具类，调用其中的<code>sendMail</code>方法可以完成邮件发送</p>
</blockquote>
<h4 id="4-3-6-用户点击邮件激活"><a href="#4-3-6-用户点击邮件激活" class="headerlink" title="4.3.6 用户点击邮件激活"></a>4.3.6 用户点击邮件激活</h4><h5 id="4-3-6-1-功能分析"><a href="#4-3-6-1-功能分析" class="headerlink" title="4.3.6.1 功能分析"></a>4.3.6.1 功能分析</h5><p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/07/22/sendEmail-1563759504470.png" alt="title"></p>
<h5 id="4-3-6-2-发送邮件代码实现"><a href="#4-3-6-2-发送邮件代码实现" class="headerlink" title="4.3.6.2 发送邮件代码实现"></a>4.3.6.2 发送邮件代码实现</h5>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">@Override
public boolean regist(User user) {
    &#x2F;&#x2F; 1. 根据用户名查询用户对象
    User u = userDao.findByUsername(user.getUsername());
    &#x2F;&#x2F; 判断是否为null
    if (u != null){
        &#x2F;&#x2F; 不为空，说明用户名存在，注册失败
        return false;
    }
    &#x2F;&#x2F; 2. 保存用户信息
    &#x2F;&#x2F; 2.1 设置激活码，唯一字符串
    String uuid = UuidUtil.getUuid();
    System.out.println(uuid);
    user.setCode(uuid);
    &#x2F;&#x2F; 2.2 设置激活状态
    user.setStatus(&quot;N&quot;); &#x2F;&#x2F; 默认未激活
    userDao.save(user);

    &#x2F;&#x2F; 3. 激活邮件发送，邮件正文
    &#x2F;&#x2F; 邮件正文 todo:后期项目部署需要将href改为服务器域名
    String content = &quot;&lt;a href=&#39;http:&#x2F;&#x2F;localhost&#x2F;travel&#x2F;activeUserServlet?code=&quot;+user.getCode()+&quot;&#39;&gt;点击激活账户&lt;&#x2F;a&gt;&quot;;
    &#x2F;&#x2F; 发送邮件
    MailUtils.sendMail(user.getEmail(),content,&quot;激活邮件&quot;);

    return true;
}
</code></pre>
<h5 id="4-3-6-3-修改保存Dao代码，以及存储status和code代码逻辑"><a href="#4-3-6-3-修改保存Dao代码，以及存储status和code代码逻辑" class="headerlink" title="4.3.6.3 修改保存Dao代码，以及存储status和code代码逻辑"></a>4.3.6.3 修改保存Dao代码，以及存储<code>status</code>和<code>code</code>代码逻辑</h5><p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/07/22/update-1563759516887.png" alt="title"></p>
<h5 id="4-3-6-4-激活Servlet实现"><a href="#4-3-6-4-激活Servlet实现" class="headerlink" title="4.3.6.4 激活Servlet实现"></a>4.3.6.4 激活<code>Servlet</code>实现</h5>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.web.servlet;

import cn.itcast.travel.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@WebServlet(&quot;&#x2F;activeUserServlet&quot;)
public class ActiveUserServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        &#x2F;&#x2F; 1. 获取激活码
        String code = request.getParameter(&quot;code&quot;);
        if (code != null){
            &#x2F;&#x2F; 2. 调用service完成激活
            UserServiceImpl service = new UserServiceImpl();
            boolean flag = service.active(code);
            &#x2F;&#x2F; 3. 判断标记
            String msg = null;
            if (flag){
                &#x2F;&#x2F; 激活成功
                msg = &quot;激活成功，请&lt;a href=&#39;login.html&#39;&gt;登录&lt;&#x2F;a&gt;&quot;;
            }else{
                &#x2F;&#x2F; 激活失败
                msg = &quot;激活失败，请联系管理员！&quot;;
            }
            &#x2F;&#x2F; 回写数据
            response.setContentType(&quot;text&#x2F;html;charset=utf-8&quot;);
            response.getWriter().write(msg);
        }
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doPost(request, response);
    }
}
</code></pre>
<h5 id="4-3-6-5-激活Service代码"><a href="#4-3-6-5-激活Service代码" class="headerlink" title="4.3.6.5 激活Service代码"></a>4.3.6.5 激活<code>Service</code>代码</h5>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">@Override
public boolean active(String code) {
    &#x2F;&#x2F; 1. 根据激活码查询用户对象
    User user = userDao.findByCode(code);
    if (user != null){
        &#x2F;&#x2F; 2. 调用dao的修改激活状态的方法
        userDao.updateStatus(user);
        return true;
    }else{
        return false;
    }
}
</code></pre>
<h5 id="4-3-6-6-激活Dao代码：findByCode-amp-updateStatus"><a href="#4-3-6-6-激活Dao代码：findByCode-amp-updateStatus" class="headerlink" title="4.3.6.6 激活Dao代码：findByCode&amp;updateStatus"></a>4.3.6.6 激活Dao代码：<code>findByCode&amp;updateStatus</code></h5>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">&#x2F;**
 * 根据激活码查询用户对象
* @param code
* @return 查询到的对象
*&#x2F;
@Override
public User findByCode(String code) {
    User user = null;
    try{
        String sql = &quot;select * from tab_user where code = ?&quot;;
        user = template.queryForObject(sql, new BeanPropertyRowMapper&lt;User&gt;(User.class), code);
    }catch (DataAccessException e){
        e.printStackTrace();
    }
    return user;
}

&#x2F;**
* 修改指定用户激活状态
* @param user
*&#x2F;
@Override
public void updateStatus(User user) {
    template.update(&quot;update tab_user set status = &#39;Y&#39; where uid = ?&quot;,user.getUid());
}
</code></pre>
<h2 id="5-登录"><a href="#5-登录" class="headerlink" title="5. 登录"></a>5. 登录</h2><h3 id="5-1-分析"><a href="#5-1-分析" class="headerlink" title="5.1 分析"></a>5.1 分析</h3><p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/07/22/login-1563759530918.bmp" alt="title"></p>
<h3 id="5-2-前台代码实现"><a href="#5-2-前台代码实现" class="headerlink" title="5.2 前台代码实现"></a>5.2 前台代码实现</h3>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-javascript">&lt;script&gt;
    $(function () {
    &#x2F;&#x2F; 1. 给登录按钮绑定单击事件
    $(&quot;#btn_sub&quot;).click(function () {
        &#x2F;&#x2F; 2. 发送ajax请求，提交表单数据
        $.post(&quot;loginServlet&quot;,$(&quot;#loginForm&quot;).serialize(),function (data) {
            &#x2F;&#x2F; data: {flag:false,errorMsg:&quot;&quot;}
            if (data.flag){
                &#x2F;&#x2F; 登录成功
                location.href = &quot;index.html&quot;;
            } else{
                &#x2F;&#x2F; 登录失败
                $(&quot;#errorMsg&quot;).html(data.errorMsg);
            }
        });
    });
});
&lt;&#x2F;script&gt;
</code></pre>
<h3 id="5-3-后台代码实现"><a href="#5-3-后台代码实现" class="headerlink" title="5.3 后台代码实现"></a>5.3 后台代码实现</h3><h4 id="5-3-1-登录控制器：LoginServlet"><a href="#5-3-1-登录控制器：LoginServlet" class="headerlink" title="5.3.1 登录控制器：LoginServlet"></a>5.3.1 登录控制器：<code>LoginServlet</code></h4>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.web.servlet;

import cn.itcast.travel.domain.ResultInfo;
import cn.itcast.travel.domain.User;
import cn.itcast.travel.service.impl.UserServiceImpl;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.apache.commons.beanutils.BeanUtils;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.util.Map;

@WebServlet(&quot;&#x2F;loginServlet&quot;)
public class LoginServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        &#x2F;&#x2F; 1. 获取用户名和密码
        Map&lt;String, String[]&gt; map = request.getParameterMap();
        &#x2F;&#x2F; 2. 封装User对象
        User user = new User();
        try {
            BeanUtils.populate(user,map);
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
        &#x2F;&#x2F; 3. 调用service查询
        UserServiceImpl service = new UserServiceImpl();
        User u = service.login(user);
        ResultInfo info = new ResultInfo();

        &#x2F;&#x2F; 4. 判断用户对象是否为null
        if (u == null){
            &#x2F;&#x2F; 用户名或密码错误
            info.setFlag(false);
            info.setErrorMsg(&quot;用户名或密码错误&quot;);
        }
        &#x2F;&#x2F; 5. 判断用户账户是否激活
        if (u != null &amp;&amp; !&quot;Y&quot;.equals(u.getStatus())){
            &#x2F;&#x2F; 用户未激活
            info.setFlag(false);
            info.setErrorMsg(&quot;您的账户尚未激活，请激活&quot;);
        }
        &#x2F;&#x2F; 6. 判断登录成功
        if (u != null &amp;&amp; &quot;Y&quot;.equals(u.getStatus())){
            &#x2F;&#x2F; 登录成功
            info.setFlag(true);
            &#x2F;&#x2F; 将登陆用户信息存入session中
            request.getSession().setAttribute(&quot;user&quot;,u);
        }
        &#x2F;&#x2F; 响应数据
        ObjectMapper mapper = new ObjectMapper();
        response.setContentType(&quot;application&#x2F;json;charset=utf-8&quot;);
        mapper.writeValue(response.getOutputStream(),info);
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doPost(request, response);
    }
}
</code></pre>
<h4 id="5-3-2-服务层代码"><a href="#5-3-2-服务层代码" class="headerlink" title="5.3.2 服务层代码"></a>5.3.2 服务层代码</h4>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">&#x2F;**
* 进行登录操作
* @param user
* @return User对象
*&#x2F;
@Override
public User login(User user) {
    return userDao.findByUsernameAndPassword(user.getUsername(),user.getPassword());
}
</code></pre>
<h4 id="5-3-3-Dao层代码"><a href="#5-3-3-Dao层代码" class="headerlink" title="5.3.3 Dao层代码"></a>5.3.3 Dao层代码</h4>
<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">&#x2F;**
* 根据用户名和密码，查询是否有此用户
* @param username
* @param password
* @return user对象
*&#x2F;
@Override
public User findByUsernameAndPassword(String username, String password) {
    User user = null;
    try{
        String sql = &quot;select * from tab_user where username = ? and password = ?&quot;;
        user = template.queryForObject(sql, new BeanPropertyRowMapper&lt;User&gt;(User.class), username,password);
    }catch (DataAccessException e){
        e.printStackTrace();
    }
    return user;
}
</code></pre>
<h4 id="5-3-4-用户登录后，主页显示登录用户名功能"><a href="#5-3-4-用户登录后，主页显示登录用户名功能" class="headerlink" title="5.3.4 用户登录后，主页显示登录用户名功能"></a>5.3.4 用户登录后，主页显示登录用户名功能</h4><p><code>header.html</code>代码</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-javascript">&lt;script&gt;
    $(function () {
       $.get(&quot;findUserServlet&quot;,{},function (data) {
           var msg = &quot;欢迎回来，&quot;+data.name;
           $(&quot;#span_username&quot;).html(msg);
       })
    });
&lt;&#x2F;script&gt;
</code></pre>
<p>控制器代码</p>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.web.servlet;

import com.fasterxml.jackson.databind.ObjectMapper;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@WebServlet(&quot;&#x2F;findUserServlet&quot;)
public class FindUserServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        &#x2F;&#x2F; 从session中获取登录用户
        Object user = request.getSession().getAttribute(&quot;user&quot;);
        &#x2F;&#x2F; 将user回写客户端
        ObjectMapper mapper = new ObjectMapper();
        response.setContentType(&quot;application&#x2F;json;charset=utf-8&quot;);
        mapper.writeValue(response.getOutputStream(),user);
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doPost(request, response);
    }
}
</code></pre>
<h2 id="6-退出"><a href="#6-退出" class="headerlink" title="6. 退出"></a>6. 退出</h2><p>什么情况下算登录了？答：session中有user对象。</p>
<ul>
<li>实现步骤：<ul>
<li>访问servlet，将session销毁</li>
<li>跳转到登录页面</li>
</ul>
</li>
<li>前台代码实现：</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-javascript">&lt;a href=&quot;javascript:location.href=&#39;exitServlet&#39;;&quot;&gt;退出&lt;&#x2F;a&gt;
</code></pre>
<ul>
<li>后台代码实现：</li>
</ul>

<!-- Has Prism -->
<pre class="line-numbers" style=""><code class="language-java">package cn.itcast.travel.web.servlet;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@WebServlet(&quot;&#x2F;exitServlet&quot;)
public class ExitServlet extends HttpServlet {
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        &#x2F;&#x2F; 1. 销毁session
        request.getSession().invalidate();
        &#x2F;&#x2F; 2. 跳转到登录页面
        response.sendRedirect(request.getContextPath()+&quot;&#x2F;login.html&quot;);
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        this.doPost(request, response);
    }
}
</code></pre>

            </div>
            <hr>

            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="https://zero024.cn" class="b-link-green">Zero的博客</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/JavaWeb/travel-project01.html" class="b-link-green">旅游网项目01</a>
                </p>
            </div>
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '232778317d016c12944b',
        clientSecret: 'eff34508ca3902812960cd0c524ad0300bae98d8',
        repo: 'blog-comments',
        owner: 'zero6996',
        admin: "zero6996",
        id: '2019-07-21T23-59-00',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/JavaWeb/travel-project02.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/19.jpg" class="responsive-img" alt="旅游网项目02">
                        
                        <span class="card-title">旅游网项目02</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">1. 前言旅游网项目，今日内容主要为优化Servlet、分类数据查询和分页查询。

2. 优化Servlet2.1 目的为了减少Servlet的数量，现在是一个功能一个Servlet，将其优化为相同功能的Servlet为一个模块。相当于在数</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2019-07-23
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/JavaWeb/" class="post-category" target="_blank">
                                    JavaWeb
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Project/" target="_blank">
                        <span class="chip bg-color">Project</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/JavaWeb/maven.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/11.jpg" class="responsive-img" alt="Maven">
                        
                        <span class="card-title">Maven</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">1. Maven基础概念和配置Maven是一个项目管理工具，它包含了一个项目对象模型(POM:Project Object Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Depende</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2019-07-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/JavaWeb/" class="post-category" target="_blank">
                                    JavaWeb
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('200')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Zero的博客<br />'
            + '作者: Zero<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>

    </div>
    <div class="col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>
    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            
                &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
                <span class="white-color">312k</span>
            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/zero6996" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:1490829140@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1490829140" class="tooltipped" data-tooltip="QQ联系我: 1490829140" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input" autofocus>
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->



    <script src="/libs/others/clicklove.js"></script>


    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":145,"height":315},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
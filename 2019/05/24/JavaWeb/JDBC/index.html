<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="JDBC, Zero的博客">
    <meta name="description" content="1. JDBCJava数据库连接(Java DataBase Connectivity)，简称JDBC。是一种用于执行SQL语句的Java API，可以为多种关系数据库提供统一访问，它由一组Java语言编写的类好接口组成。

1.1 客户端">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>JDBC | Zero的博客</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
        code[class*="language-"], pre[class*="language-"] {
            white-space: pre !important;
        }
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
</head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">Zero的博客</span>
                    </a>
                </div>
                

<a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Zero的博客</div>
        <div class="logo-desc">
            
            欢迎来到我的博客！
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/zero6996" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Follow Me 秋梨膏~
            </a>
        </li>
        
    </ul>

    <div class="social-link">
    <a href="https://github.com/zero6996" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:1490829140@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1490829140" class="tooltipped" data-tooltip="QQ联系我: 1490829140" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/zero6996" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Follow Me 秋梨膏~" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
</header>





<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/11.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        JDBC
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }
</style>
<div class="row">
    <div class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/JDBC/" target="_blank">
                                <span class="chip bg-color">JDBC</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/JavaWeb/" class="post-category" target="_blank">
                                JavaWeb
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-05-24
                </div>

                
                    
                    <div class="info-break-policy">
                        <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                        4.3k
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                        19 分
                    </div>
                    
                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="1-JDBC"><a href="#1-JDBC" class="headerlink" title="1. JDBC"></a>1. JDBC</h2><p>Java数据库连接(Java DataBase Connectivity)，简称JDBC。是一种用于执行SQL语句的Java API，可以为多种关系数据库提供统一访问，它由一组Java语言编写的类好接口组成。</p>
<a id="more"></a>
<h3 id="1-1-客户端操作MySQL数据库的方式"><a href="#1-1-客户端操作MySQL数据库的方式" class="headerlink" title="1.1 客户端操作MySQL数据库的方式"></a>1.1 客户端操作MySQL数据库的方式</h3><ol>
<li>使用第三方客户端访问：SQLyog、Navicat、SQLWave、MyDB Studio等等</li>
<li>使用MySQL自带的命令行方式</li>
<li>通过Java API来访问MySQL数据库</li>
</ol>
<h3 id="1-2-什么是JDBC"><a href="#1-2-什么是JDBC" class="headerlink" title="1.2 什么是JDBC"></a>1.2 什么是JDBC</h3><p><strong>JDBC本质</strong>：其实是官方（sun公司）定义的一套操作所有关系型数据库的规则，即接口。各个数据库厂商去实现这套接口，提供数据库驱动jar包。我们可以使用这套接口(JDBC)编程，真正执行的代码是驱动jar包中的实现类。</p>
<ul>
<li>使用JDBC的好处<ul>
<li>如果要开发访问数据库的程序，只需会调用JDBC接口中的方法即可，不用关注类具体实现</li>
<li>使用同一套Java代码，进行少量的修改就可以访问其他JDBC支持的数据库了</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/05/25/JDBC-1558754492770.jpg" alt="JDBC"></p>
<h3 id="1-3-使用JDBC开发使用到的包"><a href="#1-3-使用JDBC开发使用到的包" class="headerlink" title="1.3 使用JDBC开发使用到的包"></a>1.3 使用JDBC开发使用到的包</h3><table>
<thead>
<tr>
<th>使用的包</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>java.sql</td>
<td>所有与JDBC访问数据库相关的接口和类</td>
</tr>
<tr>
<td>javax.sql</td>
<td>数据库扩展包，提供数据库额外的功能。如连接池</td>
</tr>
<tr>
<td>数据库的驱动</td>
<td>由各大数据库厂商提供，需要额外去下载，是对JDBC接口实现的类</td>
</tr>
</tbody>
</table>
<h3 id="1-4-JDBC的核心API"><a href="#1-4-JDBC的核心API" class="headerlink" title="1.4 JDBC的核心API"></a>1.4 JDBC的核心API</h3><table>
<thead>
<tr>
<th>接口或类</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>DriverManager类</td>
<td>1. 管理和注册数据库驱动；2. 得到数据库连接对象</td>
</tr>
<tr>
<td>Connection接口</td>
<td>一个连接对象，可用于创建Statement和PreparedStatement对象</td>
</tr>
<tr>
<td>Statement接口</td>
<td>一个SQL语句对象，用于将SQL语句发送给数据库服务器</td>
</tr>
<tr>
<td>PrepareStatement接口</td>
<td>一个SQL语句对象，是Statement的子接口</td>
</tr>
<tr>
<td>ResultSet接口</td>
<td>用于封装数据库查询的结果集，返回给客户端Java程序</td>
</tr>
</tbody>
</table>
<h3 id="1-5-导入驱动Jar包"><a href="#1-5-导入驱动Jar包" class="headerlink" title="1.5 导入驱动Jar包"></a>1.5 导入驱动Jar包</h3><p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/05/25/1558669057920-1558754599644.png" alt="import_Jar"></p>
<h3 id="1-6-加载和注册驱动"><a href="#1-6-加载和注册驱动" class="headerlink" title="1.6 加载和注册驱动"></a>1.6 加载和注册驱动</h3><table>
<thead>
<tr>
<th>加载和注册驱动的方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Class.forName(数据库驱动实现类)</td>
<td>加载和注册数据库驱动，数据库驱动由mysql厂商提供：”com.mysql.jdbc.Driver”</td>
</tr>
</tbody>
</table>
<blockquote>
<p>从JDBC3开始，弃用了驱动类“com.mysql.jdbc.Driver”，新的驱动程序类是“com.mysql.cj.jdbc.Driver”。驱动程序是通过SPI自动注册的，通常不需要手动加载驱动程序类。</p>
</blockquote>
<h2 id="2-DriverManager类"><a href="#2-DriverManager类" class="headerlink" title="2. DriverManager类"></a>2. DriverManager类</h2><p>驱动管理对象类，该类的作用是管理和注册驱动，以及创建数据库的连接。</p>
<blockquote>
<p>注：mysql5之后的驱动jar包可以省略注册驱动的步骤。</p>
</blockquote>
<h3 id="2-1-获取数据库连接"><a href="#2-1-获取数据库连接" class="headerlink" title="2.1 获取数据库连接"></a>2.1 获取数据库连接</h3><ul>
<li><code>Connection getConnection(String url,String user,String password)</code>：通过连接字符串，用户名，密码来得到数据库的连接对象</li>
<li><p><code>Connection getConnection(String url,Properties info)</code>：通过连接字符串，属性对象来得到连接对象</p>
</li>
<li><p><strong>参数说明</strong>：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>参数列表</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户名</td>
<td>登录的用户名</td>
</tr>
<tr>
<td>密码</td>
<td>登录的密码</td>
</tr>
<tr>
<td>连接字符串URL</td>
<td>不同的数据库URL是不同的，MySQL的写法：jdbc:mysql://localhost:3306/数据库名[?参数名=参数值]</td>
</tr>
<tr>
<td>驱动类的字符串名</td>
<td>com.mysql.cj.jdbc.Driver</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>连接数据库URL地址格式</strong>：<code>协议名:子协议://服务器名或IP地址:端口号/数据库名?参数=参数值&amp;参数2=值2</code></li>
</ul>
<p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/05/25/DBURL-1558754637745.jpg" alt="DBURL"></p>
<blockquote>
<p>在本地服务器的情况下：MySQL中可简写为<code>jdbc:mysql:///数据库名</code></p>
</blockquote>
<ul>
<li><strong>乱码问题处理</strong></li>
</ul>
<p>如果数据库出现乱码，可以指定参数：<code>?characterEncoding=utf8</code>，表示让数据库以UTF-8编码来处理数据。</p>
<h3 id="2-2-快速入门"><a href="#2-2-快速入门" class="headerlink" title="2.2 快速入门"></a>2.2 快速入门</h3><ol>
<li>使用用户名、密码、URL来得到连接对象<pre><code class="java">public class Demo01JDBC {
 public static void main(String[] args) throws Exception{
     // 1. 导入jar驱动包
     // 2.注册驱动
     Class.forName("com.mysql.cj.jdbc.Driver"); // com.mysql.jdbc.Driver已弃用，且该语句jdbc3后可省略
     // 3. 使用用户名密码来获取数据库连接对象
     Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/db1?serverTimezone=UTC", "root", "123456");
     // 4. 定义sql语句
     String sql = "update account set balance=1000 where id=1";
     // 5. 获取执行sql语句的对象
     Statement stat = conn.createStatement();
     // 6. 执行sql语句
     int count = stat.executeUpdate(sql);
     // 7. 处理结果
     System.out.println(count);
     // 8. 释放资源
     stat.close();
     conn.close();
 }
}
</code></pre>
</li>
</ol>
<blockquote>
<p>从JDBC3开始，弃用了驱动类“com.mysql.jdbc.Driver”，新的驱动程序类是“com.mysql.cj.jdbc.Driver”。驱动程序是通过SPI自动注册的，通常不需要手动加载驱动程序类。</p>
</blockquote>
<ol start="2">
<li>使用属性文件和URL得到连接对象<br><code>`</code>java<br>public class Demo02JDBC {<br> public static void main(String[] args) throws SQLException {<pre><code> // 1. 定义URL连接字符串
 String url = "jdbc:mysql:///db1?serverTimezone=UTC"; // 本地服务器且端口号3306.故省略
 // 2. 创建属性对象
 Properties info = new Properties();
 // 3. 将用户名和密码放入info对象中
 info.setProperty("user","root");
 info.setProperty("password","123456");
 // 4. 通过属性文件来获取数据库连接对象
 Connection conn = DriverManager.getConnection(url, info);
 System.out.println(conn); // com.mysql.cj.jdbc.ConnectionImpl@51cdd8a：获取的是连接对象的内存地址值
</code></pre> }<br>}</li>
</ol>
<pre><code>


## 3. Connection接口

Connection 接口，具体的实现类由数据库的厂商实现，代表一个连接对象。

### 3.1 主要方法

- 获取执行sql的对象：
  - `Statement createStatement(String sql)`
  - `PreparedStatement preparedStatement(String sql)`
- 管理事务：
  - 开启事务：`setAutoCommit(boolean autoCommit)`:调用该方法设置参数为fasle，即开启事务
  - 提交事务：`commit()`
  - 回滚事务：`rollback()`



## 4. Statement接口

用于执行静态SQL语句并返回其生成的结果对象

### 4.1 主要方法

1. `boolean execute(String sql)`：可以执行任意的sql
2. `int executeUpdate(String sql)`：执行DML(insert、update、delete)语句、DDL(create、alter、drop)语句。返回值：**影响的行数**，可以通过判断行数来确定语句是否执行成功。
3. `ResultSet executeQuery(String sql)`：执行DQL(select)语句。返回结果集对象

### 4.2 演示案例

1. account表中添加一条记录，使用insert语句
```java
public class Demo03JDBC {
    public static void main(String[] args) {
        Statement stmt = null;
        Connection conn = null;
        try {
            // 1. 注册驱动
            Class.forName("com.mysql.cj.jdbc.Driver");
            // 2. 定义sql
            String sql = "insert into account values(null,'小王',3000)";
            // 3. 获取连接数据库对象
            conn = DriverManager.getConnection("jdbc:mysql:///db1?serverTimezone=UTC&amp;characterEncoding=gbk", "root", "123456");
            // 4. 获取执行sql的对象 Statement，并传入sql语句执行
            stmt = conn.createStatement();
            int count = stmt.executeUpdate(sql); // 返回值影响的行数
            // 5. 处理结果
            if (count&gt;0)
                System.out.println("添加成功");
            else
                System.out.println("添加失败");
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
            //stmt.close();
            // 避免空指针异常
            if(stmt!=null &amp;&amp; conn!=null){
                try {
                    stmt.close();
                    conn.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre><ol start="2">
<li><p>修改一条表记录</p>
<pre><code class="java">// 只需在上述代码基础上改动sql语句即可
String sql = "update account set balance=2000 where name='小王'";     
conn = DriverManager.getConnection("jdbc:mysql:///db1?serverTimezone=UTC&amp;characterEncoding=gbk", "root", "123456");
stmt = conn.createStatement();
int count = stmt.executeUpdate(sql); // 返回值影响的行数
if (count&gt;0)
 System.out.println("修改成功");
else
 System.out.println("修改失败");
</code></pre>
</li>
<li><p>删除一条表记录</p>
<pre><code class="java">// 改动sql语句即可
public class DelJDBC {
 public static void main(String[] args) {
     Connection conn = null;
     Statement stmt = null;
     try {
         Class.forName("com.mysql.cj.jdbc.Driver");
         conn = DriverManager.getConnection("jdbc:mysql:///db1?serverTimezone=UTC","root","123456");
         stmt = conn.createStatement();
         int count = stmt.executeUpdate("delete from account where id=3");
         if (count&gt;0)
             System.out.println("delete success!");
         else
             System.out.println("delete failed!");
     } catch (Exception e) {
         e.printStackTrace();
     }finally {
         if (stmt!=null &amp;&amp; conn!=null) {
             try {
                 stmt.close();
                 conn.close();
             } catch (SQLException e) {
                 e.printStackTrace();
             }
         }
     }
 }
}
</code></pre>
</li>
</ol>
<h2 id="5-ResultSet接口"><a href="#5-ResultSet接口" class="headerlink" title="5. ResultSet接口"></a>5. ResultSet接口</h2><p>结果集对象，封装查询的结果</p>
<h3 id="5-1-主要方法"><a href="#5-1-主要方法" class="headerlink" title="5.1 主要方法"></a>5.1 主要方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>boolean next()</code></td>
<td>游标向下移动1行，返回布尔类型，如果还有下一条记录返回true，反之false</td>
</tr>
<tr>
<td><code>数据类型 getXxx()</code></td>
<td>通过字段名或是列编号，填入参数String或是整数(1开始)，返回不同的类型。</td>
</tr>
</tbody>
</table>
<p><strong>常用数据类型转换表</strong></p>
<p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/05/25/jdbc_sql-1558754667060.jpg" alt="jdbc_sql"></p>
<h3 id="5-2-方法演示"><a href="#5-2-方法演示" class="headerlink" title="5.2 方法演示"></a>5.2 方法演示</h3><pre><code class="java">public class DQLJDBC {
    public static void main(String[] args) {
        ResultSet rs = null;
        Connection conn = null;
        Statement stmt = null;
        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
            conn = DriverManager.getConnection("jdbc:mysql:///db1?serverTimezone=UTC","root","123456");
            stmt = conn.createStatement();
            rs = stmt.executeQuery("select * from account");
            // 处理结果
            while (rs.next()){ // 循环判断游标是否是最后一行末尾
                int id = rs.getInt(1); // 通过列编号获取数据
                String name = rs.getString("name"); // 通过列名获取
                double balance = rs.getDouble(3); // 通过列编号获取
                System.out.println(id+","+name+","+balance);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
            if (rs!=null){
                try {
                    rs.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
            if (stmt!=null){
                try {
                    stmt.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }if (conn!=null){
                try {
                    conn.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>
<h3 id="5-3-练习"><a href="#5-3-练习" class="headerlink" title="5.3 练习"></a>5.3 练习</h3><ul>
<li>定义一个方法：查询users表的数据将其封装为对象，然后装载集合，返回。</li>
</ul>
<pre><code class="java">// 定义存储数据的类
public class Users {
    private int id;
    private String name;
    private int age;
    private String site;
    // 省略构造方法等
}
// 定义方法类，实现方法
public class Demo5JDBC {
    public static void main(String[] args) {
        List&lt;Users&gt; list = new Demo5JDBC().findAll();
        System.out.println(list);
    }
    // 创建方法，查询所有users对象，返回一个list
    public List&lt;Users&gt; findAll(){
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;
        List&lt;Users&gt; list = null;
        try {
            // 1. 注册驱动
            Class.forName("com.mysql.cj.jdbc.Driver");
            // 2. 获取连接
            conn = DriverManager.getConnection("jdbc:mysql:///db5?serverTimezone=UTC", "root", "123456");
            // 3. 获取执行sql对象
            stmt = conn.createStatement();
            // 4. 执行sql
            rs = stmt.executeQuery("select * from users");
            // 5. 遍历结果集，封装对象，装载集合
            Users us = null;
            list = new ArrayList&lt;&gt;();
            while (rs.next()){
                // 获取数据
                int id = rs.getInt("id");
                String name = rs.getString("name");
                int age = rs.getInt("age");
                String site = rs.getString(4);
                // 创建users对象,并赋值
                us = new Users();
                us.setId(id);
                us.setName(name);
                us.setAge(age);
                us.setSite(site);
                // 装载集合
                list.add(us);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
            // 释放资源，rs，stmt和conn
            if (rs!=null){
                try {
                    rs.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
            // 省略其他两个，与上方法一样
        }
        return list;
    }
}
</code></pre>
<h2 id="6-自定义数据库工具类JdbcUtils"><a href="#6-自定义数据库工具类JdbcUtils" class="headerlink" title="6. 自定义数据库工具类JdbcUtils"></a>6. 自定义数据库工具类JdbcUtils</h2><p>可以把经常用到的功能做成一个工具类，在不同的地方重用。</p>
<h3 id="6-1-主要方法"><a href="#6-1-主要方法" class="headerlink" title="6.1 主要方法"></a>6.1 主要方法</h3><ol>
<li>可以把几个字符串定义成常量：用户名，密码，URL，驱动类</li>
<li>得到数据库的连接：<code>getConnection()</code></li>
<li>关闭所有打开的资源：<code>close(Connection conn,Statement stmt,ResultSet rs)</code> 和<code>close(ResultSet rs,Statement stmt, Connection conn)</code></li>
</ol>
<h4 id="6-2-使用工具类将上一个练习优化"><a href="#6-2-使用工具类将上一个练习优化" class="headerlink" title="6.2 使用工具类将上一个练习优化"></a>6.2 使用工具类将上一个练习优化</h4><ol>
<li><p>定义工具类<br>在项目目录下新建一个<code>util</code>文件夹，然后新建<code>JDBCUtils.java</code>文件，编写如下内容。<br><code>`</code>java<br>// JDBC工具类<br>public class JDBCUtils {<br> private static String url;<br> private static String user;<br> private static String password;<br> private static String driver;</p>
<p> // 文件的读取，只需读取一次即可拿到这些值：使用静态代码块<br> static {</p>
<pre><code> // 读取资源文件，获取配置值
 try {
     // 1. 创建Properties集合类
     Properties pro = new Properties();
     // 获取src路径下的文件的方式--&gt;ClassLoader 类加载器,如此就可以动态的获取src的绝对路径
     ClassLoader classLoader = JDBCUtils.class.getClassLoader();
     URL resource = classLoader.getResource("jdbc.properties");
     String path = resource.getPath();
     System.out.println(path);
     // 2. 加载文件
</code></pre><p>//            pro.load(new FileReader(“src/jdbc.properties”));</p>
<pre><code>     pro.load(new FileReader(path));
     // 3. 获取属性，赋值
     url = pro.getProperty("url");
     user = pro.getProperty("user");
     password = pro.getProperty("password");
     driver = pro.getProperty("driver");
     // 4. 注册驱动
     Class.forName(driver);
 } catch (IOException e) {
     e.printStackTrace();
 } catch (ClassNotFoundException e) {
     e.printStackTrace();
 }
</code></pre><p> }<br> // 获取连接<br> public static Connection getConnection() throws SQLException {</p>
<pre><code> return DriverManager.getConnection(url,user,password);
</code></pre><p> }<br> // 释放资源<br> public static void close(Statement stmt, Connection conn){</p>
<pre><code> if (stmt!=null){
     try {
         stmt.close();
     } catch (SQLException e) {
         e.printStackTrace();
     }
 }
 if (conn!=null){
     try {
         conn.close();
     } catch (SQLException e) {
         e.printStackTrace();
     }
 }
</code></pre><p> }<br> // 释放资源重载<br> public static void close(ResultSet rs,Statement stmt, Connection conn){</p>
<pre><code> if (rs!=null){
     try {
         rs.close();
     } catch (SQLException e) {
         e.printStackTrace();
     }
 }
 if (stmt!=null){
     try {
         stmt.close();
     } catch (SQLException e) {
         e.printStackTrace();
     }
 }
 if (conn!=null){
     try {
         conn.close();
     } catch (SQLException e) {
         e.printStackTrace();
     }
 }
</code></pre><p> }<br>}</p>
</li>
</ol>
<pre><code>2. 定义配置文件
在项目源文件src下新建`jdbc.properties`文件。

```properties
url=jdbc:mysql:///db5?serverTimezone=UTC&amp;characterEncoding=gbk
user=root
password=123456
driver=com.mysql.cj.jdbc.Driver
</code></pre><ol start="3">
<li><p>演示用法</p>
<pre><code class="java">public class Demo6JDBCUtil {
 public static void main(String[] args) {
     List&lt;Users&gt; list = new Demo6JDBCUtil().findAll2();
     System.out.println(list);
 }

 /**
  * 演示JDBC工具类
  * @return
  */
 public List&lt;Users&gt; findAll2(){
     Connection conn = null;
     Statement stmt = null;
     ResultSet rs = null;
     List&lt;Users&gt; list = null;
     try {
//            // 1. 注册驱动
//            Class.forName("com.mysql.cj.jdbc.Driver");
//            // 2. 获取连接
//            conn = DriverManager.getConnection("jdbc:mysql:///db5?serverTimezone=UTC", "root", "123456");
         conn = JDBCUtils.getConnection();
         // 3. 获取执行sql对象
         stmt = conn.createStatement();
         // 4. 执行sql
         rs = stmt.executeQuery("select * from users");
         // 5. 遍历结果集，封装对象，装载集合
         Users us = null;
         list = new ArrayList&lt;&gt;();
         while (rs.next()){
             // 获取数据
             int id = rs.getInt("id");
             String name = rs.getString("name");
             int age = rs.getInt("age");
             String site = rs.getString(4);
             // 创建users对象,并赋值
             us = new Users();
             us.setId(id);
             us.setName(name);
             us.setAge(age);
             us.setSite(site);
             // 装载集合
             list.add(us);
         }
     } catch (Exception e) {
         e.printStackTrace();
     }finally {
         JDBCUtils.close(rs,stmt,conn); // 直接调用方法就可以释放资源
     }
     return list;
 }
}
</code></pre>
</li>
</ol>
<h3 id="6-3-练习：登录案例"><a href="#6-3-练习：登录案例" class="headerlink" title="6.3 练习：登录案例"></a>6.3 练习：登录案例</h3><ol>
<li>创建用户表</li>
<li>获取用户输入</li>
<li>查询数据库，与数据库中数据进行匹配</li>
<li>返回结果</li>
</ol>
<pre><code class="java">public class LoginExercise {
    public static void main(String[] args) {
        // 获取用户输入
        Scanner sc = new Scanner(System.in);
        System.out.print("请输入用户名：");
        String name = sc.nextLine();
        System.out.print("请输入密码：");
        String pwd = sc.nextLine();
        if (name==null || pwd==null)
            System.out.println("输入内容不能为空");
        login(name,pwd);
        sc.close();
    }
    public static void login(String name,String pwd){
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;
        try {
            // 连接数据库，判断是否存在数据
            conn = JDBCUtils.getConnection();
            stmt = conn.createStatement();
            rs = stmt.executeQuery("select * from users where name='"+name+"' and pwd='"+pwd+"'");
            if (rs.next()) // 返回布尔值，true则存在，false则不存在
                System.out.println("登录成功");
            else
                System.out.println("用户名或密码错误！");
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
            JDBCUtils.close(rs,stmt,conn);
        }
    }
}

</code></pre>
<h2 id="7-PreparedStatement接口"><a href="#7-PreparedStatement接口" class="headerlink" title="7. PreparedStatement接口"></a>7. PreparedStatement接口</h2><p>表示预编译的 SQL 语句的对象。 SQL 语句被预编译并存储在 <code>PreparedStatement</code> 对象中。然后可以使用此对象多次高效地执行该语句。  </p>
<h3 id="7-1-SQL注入问题"><a href="#7-1-SQL注入问题" class="headerlink" title="7.1 SQL注入问题"></a>7.1 SQL注入问题</h3><p>在拼接sql时，如果有一些sql的特殊关键字参与字符串的拼接，会造成安全性问题。</p>
<ul>
<li>输入密码时，如果输入以下密码，在账户和密码不正确情况下也登录成功</li>
</ul>
<p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/05/25/SQLInject-1558754766512.jpg" alt="SQLInject"></p>
<ul>
<li>原因</li>
</ul>
<p>打印了一下查询的SQL语句：<code>select * from user where name='ehwqhwqek' and pwd='a' or '1'='1';</code>发现当and前面为假，但是or后面为真，语句实际相当于：<code>select * from user where true;</code>查询了所有记录</p>
<p>要解决 SQL 注入就不能让用户输入的密码和我们的 SQL 语句进行简单的字符串拼接。</p>
<h3 id="7-2-解决SQL注入问题"><a href="#7-2-解决SQL注入问题" class="headerlink" title="7.2 解决SQL注入问题"></a>7.2 解决SQL注入问题</h3><p>使用<code>PreparedStatement</code>对象来解决该问题</p>
<ul>
<li>预编译的SQL：参数使用?作为占位符,例：<code>select * from users where name = ? and pwd = ?</code></li>
<li>给？赋值方法：<code>setXxx(?的位置编号(1开始),?的值)</code></li>
</ul>
<h4 id="7-2-1-方法演示"><a href="#7-2-1-方法演示" class="headerlink" title="7.2.1 方法演示"></a>7.2.1 方法演示</h4><pre><code class="java">// 使用prepardStatement对象解决sql注入问题
public class LoginExercise2 {
    public static void main(String[] args) {
        // 获取用户输入
        Scanner sc = new Scanner(System.in);
        System.out.print("请输入用户名：");
        String name = sc.nextLine();
        System.out.print("请输入密码：");
        String pwd = sc.nextLine();
        if (name==null || pwd==null)
            System.out.println("输入内容不能为空");
        login(name,pwd);
        sc.close();
    }
    /*
        登录方法，使用PreparedStatement实现
     */
    public static void login(String name,String pwd){
        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            // 连接数据库，判断是否存在数据
            conn = JDBCUtils.getConnection();
            // 定义sql语句
            String sql = "select * from users where name = ? and pwd = ?";
            // 获取执行sql对象
            ps = conn.prepareStatement(sql); // 将sql传入，进行预编译
            // 给？赋值
            ps.setString(1,name);
            ps.setString(2,pwd);
            rs = ps.executeQuery();
            if (rs.next()) // 返回布尔值，true则存在，false则不存在
                System.out.println("登录成功");
            else
                System.out.println("用户名或密码错误！");
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
            JDBCUtils.close(rs,ps,conn);
        }
    }
}
</code></pre>
<h3 id="7-3-PreparedStatement原理"><a href="#7-3-PreparedStatement原理" class="headerlink" title="7.3 PreparedStatement原理"></a>7.3 PreparedStatement原理</h3><p><img src="https://raw.githubusercontent.com/zero6996/GitNote-images/master/GitNote/2019/05/25/PStheory-1558754821161.jpg" alt="PStheory"></p>
<h4 id="7-3-1-优点"><a href="#7-3-1-优点" class="headerlink" title="7.3.1  优点"></a>7.3.1  优点</h4><ol>
<li><code>prepareStatement()</code>会先将 SQL 语句发送给数据库预编译。<code>PreparedStatement</code> 会引用着预编译后的结果。可以多次传入不同的参数给 <code>PreparedStatement</code> 对象并执行。减少 SQL 编译次数，提高效率。</li>
<li>安全性更高，没有SQL输入的隐患</li>
<li>提高了程序的可读性</li>
</ol>
<p>后期都会使用<code>PreparedStatement</code>来完成增删改查的所有操作</p>
<h2 id="8-JDBC的事务操作"><a href="#8-JDBC的事务操作" class="headerlink" title="8. JDBC的事务操作"></a>8. JDBC的事务操作</h2><ul>
<li><p>事务：一个包含多个步骤的业务操作。如果这个业务操作被事务管理，则这多个步骤要么同时成功，要么同时失败。</p>
</li>
<li><p>使用<code>Connection</code>对象来管理事务</p>
<ul>
<li>开启事务：<code>setAutoCommit(boolean autoCommit)</code>:调用该方法设置参数为fasle，即开启事务</li>
<li>提交事务：<code>commit()</code></li>
<li>回滚事务：<code>rollback()</code></li>
</ul>
</li>
</ul>
<h3 id="8-1-银行转账案例"><a href="#8-1-银行转账案例" class="headerlink" title="8.1 银行转账案例"></a>8.1 银行转账案例</h3><p>步骤分析：</p>
<ol>
<li>获取连接</li>
<li>开启事务</li>
<li>获取到PreparedStatement</li>
<li>使用PreparedStatement执行两次更新操作</li>
<li>正常情况下提交事务</li>
<li>出现异常回滚事务</li>
<li>释放资源</li>
</ol>
<pre><code class="java">public class EFT {
    public static void main(String[] args) {
        Connection conn = null;
        PreparedStatement ps1 = null;
        PreparedStatement ps2 = null;
        try {
            // 1. 获取连接
            conn = JDBCUtils.getConnection();
            conn.setAutoCommit(false); // 将自动提交关闭，即开启事务
            //  定义sql，小张-500
            String sql1 = "update account set balance = balance - ? where name = ?";
            // 小李+500
            String sql2 = "update account set balance = balance + ? where name = ?";
            // 获取执行sql对象
            ps1 = conn.prepareStatement(sql1);
            ps2 = conn.prepareStatement(sql2);
            // 给?赋值,小张-500
            ps1.setDouble(1,500);
            ps1.setString(2,"小张");
            ps1.executeUpdate(); // 执行更新语句
            // 给?赋值,小李+500
            ps2.setDouble(1,500);
            ps2.setString(2,"小李");
            ps2.executeUpdate(); // 执行更新语句
            // 手动制造一个异常
            int i = 3/0;
            // 提交事务
            conn.commit();
            System.out.println("事务执行完毕");
        } catch (Exception e) {
            // 事务的回滚
            try {
                if (conn != null)
                    System.out.println("事务异常！回滚中....");
                    conn.rollback();
            } catch (SQLException ex) {
                ex.printStackTrace();
            }
            e.printStackTrace();
        }finally {
            // 释放资源
            JDBCUtils.close(ps1,conn);
            if (ps2!=null){
                try {
                    ps2.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>
<ul>
<li style="list-style: none"><input type="checkbox" checked=""> 能够理解JDBC的概念</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够使用DriverManager类</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够使用Connection接口</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够使用Statement接口</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够使用ResultSet接口</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够说出SQL注入原因和解决方案</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够通过PreparedStatement完成增、删、改、查</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够完成PreparedStatement改造登录案例</li>
<li style="list-style: none"><input type="checkbox" checked=""> 能够完成JDBC事务操作</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="https://zero024.cn" class="b-link-green">Zero的博客</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2019/05/24/JavaWeb/JDBC/" class="b-link-green">JDBC</a>
                </p>
            </div>
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '232778317d016c12944b',
        clientSecret: 'eff34508ca3902812960cd0c524ad0300bae98d8',
        repo: 'blog-comments',
        owner: 'zero6996',
        admin: "zero6996",
        id: '2019-05-24T23-59-00',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2019/05/25/JavaWeb/JDBC连接池/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="JDBC连接池">
                        
                        <span class="card-title">JDBC连接池</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">1. 数据库连接池其实就是一个容器(集合)，存放数据库连接的容器。当系统初始化好后，容器被创建，容器中会申请一些连接对象。当用户来访问数据库时，从容器中获取连接对象，用户访问完后，会将连接对象归还给容器。

1.1 好处
节约资源
用户访问</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2019-05-25
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/JavaWeb/" class="post-category" target="_blank">
                                    JavaWeb
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JDBC/" target="_blank">
                        <span class="chip bg-color">JDBC</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2019/05/23/Database/MySQL多表查询和事务/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="MySQL多表查询和事务">
                        
                        <span class="card-title">MySQL多表查询和事务</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">1. MySQL多表查询当我们需要查询的数据在多张表时，就需要连接多张表查询，这就是多表查询。

1.1 表连接查询
数据准备

CREATE DATABASE IF NOT EXISTS `db5` CHARACTER SET gbk;
</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2019-05-23
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/DataBase/" class="post-category" target="_blank">
                                    DataBase
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/MySQL/" target="_blank">
                        <span class="chip bg-color">MySQL</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    </div>
    <div class="col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>
    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            
                &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
                <span class="white-color">252.3k</span>
            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/zero6996" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:1490829140@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1490829140" class="tooltipped" data-tooltip="QQ联系我: 1490829140" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input" autofocus="">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->



    <script src="/libs/others/clicklove.js"></script>


    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":217,"height":472},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>